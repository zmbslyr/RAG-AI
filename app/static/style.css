:root {
  --brand: #2d6cdf;
  --bg: #2f3136;
  --panel: #ffffff;
  --subtle: #f8f9fb;
  --border: #e5e7eb;
  --text: #111;
}

* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow: hidden; /* panes will scroll */
}

/* ===== 50/50 SPLIT ===== */
.app {
  display: flex;
  height: 100vh;
  width: 100vw;
}

/* Left / Right panes */
.left-pane, .right-pane {
  display: flex;
  flex-direction: column;
  background: var(--panel);
  height: 100%;
}

.left-pane  { flex: 1 1 50%; border-right: 1px solid var(--border); }
.right-pane { flex: 1 1 50%; }

/* Sticky headers inside panes */
.pane-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 14px;
  background: var(--brand);
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.viewer-controls select,
.viewer-controls input,
.viewer-controls button {
  font-size: 0.9rem;
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: #fff;
}

/* PDF viewer fills left pane */
.viewer-wrap {
  flex: 1 1 auto;
  min-height: 0;
  background: #fafafa;
}
#pdfViewer {
  width: 100%;
  height: 100%;
  border: 0;
}

/* ===== RIGHT PANE: Upload + Chat ===== */
.upload-section {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--subtle);
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.upload-section form {
  display: flex;
  gap: 8px;
  align-items: center;
  margin: 0;
  flex: 1 1 auto;
}
.upload-section input[type="file"] { flex: 1 1 auto; }
.upload-section button {
  background: var(--brand);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
}
#uploadStatus { margin-left: auto; font-size: 0.9rem; }

.processing-container { display: none; align-items: center; gap: 8px; }
.spinner { width: 18px; height: 18px; border-radius: 50%; border: 3px solid #eee; border-top: 3px solid var(--brand); animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.processing-text { font-weight: 600; font-size: 0.9rem; }
#dots::after { content: ""; display: inline-block; width: 1em; animation: dots 1s steps(3,end) infinite; }
@keyframes dots { 0%,20%{content:""} 40%{content:"."} 60%{content:".."} 80%,100%{content:"..."} }

.chat-section {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
  padding: 14px;
  gap: 10px;
}
.chat-log {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  background: #fafafa;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px;
}
.message { margin-bottom: 10px; line-height: 1.4; }
.message .bubble { display:inline-block; max-width:80%; padding:10px 14px; border-radius:12px; }
.message.user { text-align:right; }
.message.user .bubble { background: var(--brand); color:#fff; }
.message.assistant .bubble { background:#e5e7eb; color:#111; }

.thinking-dots {
  display: inline-block;
  position: relative;
  width: 1.5em;          /* fixed width for up to 3 dots */
  height: 1em;           /* fixed height so it won't push text vertically */
  font-family: monospace;
  line-height: 1;
  vertical-align: baseline;
  white-space: pre;
}

.thinking-dots::before {
  content: "...";        /* invisible spacer ensures constant width */
  visibility: hidden;
}

.thinking-dots span {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  text-align: left;
}

.quick-ask { display:flex; justify-content:flex-end; }
.quick-ask button {
  background:#fff; border:1px solid var(--border); border-radius:8px; padding:6px 10px; cursor:pointer;
}

.chat-input { display:flex; gap:10px; }
.chat-input textarea {
  flex: 1 1 auto; padding:10px; border-radius:8px; border:1px solid #ccc;
  resize:none; height:40px; min-height:40px; max-height:120px; overflow-y:auto;
}
.chat-input button {
  background: var(--brand); color:#fff; border:none; border-radius:8px; padding:10px 16px; cursor:pointer;
}

/* slim scroll for textarea (webkit) */
.chat-input textarea::-webkit-scrollbar { width: 6px; }
.chat-input textarea::-webkit-scrollbar-thumb { background: var(--brand); }

/* Chat log visited links for source pages */
.chat-log h4 { margin-top: 1em; }
.chat-log p strong { color: var(--brand); }
.chat-log a,
.chat-log a:visited { color: #0645AD; text-decoration: underline; }
.chat-log a:hover { text-decoration: none; }